# å°æ¸¸æˆç½‘ç«™ API æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°
å°æ¸¸æˆç½‘ç«™æ˜¯ä¸€ä¸ªåŸºäºRustå’ŒWebæŠ€æœ¯æ„å»ºçš„åœ¨çº¿æ¸¸æˆå¹³å°ï¼Œæä¾›ç»å…¸çŒœæ•°å­—æ¸¸æˆåŠŸèƒ½ã€‚æœ¬APIæ–‡æ¡£è¯¦ç»†æè¿°äº†æ‰€æœ‰å¯ç”¨çš„æ¥å£ç«¯ç‚¹ã€è¯·æ±‚æ ¼å¼å’Œå“åº”ç»“æ„ã€‚

## åŸºç¡€ä¿¡æ¯
- **Base URL**: `http://localhost:8082`
- **åè®®**: HTTP/1.1
- **æ•°æ®æ ¼å¼**: JSON
- **å­—ç¬¦ç¼–ç **: UTF-8
- **CORS**: æ”¯æŒè·¨åŸŸè¯·æ±‚

## è®¤è¯æ–¹å¼
å½“å‰ç‰ˆæœ¬ä¸ºå…¬å¼€APIï¼Œæ— éœ€è®¤è¯å³å¯ä½¿ç”¨æ‰€æœ‰ç«¯ç‚¹ã€‚

---

## API ç«¯ç‚¹

### 1. è·å–æ¸¸æˆä¿¡æ¯
è·å–å½“å‰æ¸¸æˆçš„çŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç›®æ ‡æ•°å­—èŒƒå›´ã€å·²å°è¯•æ¬¡æ•°ç­‰ã€‚

**ç«¯ç‚¹ä¿¡æ¯**
- **URL**: `/api/info`
- **æ–¹æ³•**: `GET`
- **æè¿°**: è·å–å½“å‰æ¸¸æˆçŠ¶æ€

**è¯·æ±‚ç¤ºä¾‹**
```bash
curl -X GET http://localhost:8082/api/info
```

**å“åº”ç¤ºä¾‹**
```json
{
  "min_range": 1,
  "max_range": 100,
  "attempts": 0,
  "game_over": false,
  "elapsed_seconds": 15
}
```

**å“åº”å­—æ®µè¯´æ˜**
| å­—æ®µå | ç±»å‹ | æè¿° |
|--------|------|------|
| min_range | integer | æ•°å­—èŒƒå›´æœ€å°å€¼ |
| max_range | integer | æ•°å­—èŒƒå›´æœ€å¤§å€¼ |
| attempts | integer | å·²å°è¯•æ¬¡æ•° |
| game_over | boolean | æ¸¸æˆæ˜¯å¦ç»“æŸ |
| elapsed_seconds | integer | æ¸¸æˆå·²è¿›è¡Œæ—¶é—´ï¼ˆç§’ï¼‰ |

---

### 2. æäº¤çŒœæµ‹
å‘æ¸¸æˆæäº¤ä¸€ä¸ªæ•°å­—çŒœæµ‹ï¼Œè·å–åé¦ˆç»“æœã€‚

**ç«¯ç‚¹ä¿¡æ¯**
- **URL**: `/api/guess`
- **æ–¹æ³•**: `POST`
- **æè¿°**: æäº¤æ•°å­—çŒœæµ‹

**è¯·æ±‚æ ¼å¼**
- **Content-Type**: `application/json`

**è¯·æ±‚ç¤ºä¾‹**
```bash
curl -X POST http://localhost:8082/api/guess \
  -H "Content-Type: application/json" \
  -d '{"guess": 50}'
```

**è¯·æ±‚ä½“å‚æ•°**
| å‚æ•°å | ç±»å‹ | å¿…éœ€ | æè¿° |
|--------|------|------|------|
| guess | integer | æ˜¯ | è¦çŒœæµ‹çš„æ•°å­—ï¼ˆ1-100ï¼‰ |

**å“åº”ç¤ºä¾‹**

**æˆåŠŸçŒœæµ‹**
```json
{
  "success": true,
  "message": "æ­å–œä½ çŒœå¯¹äº†ï¼",
  "guess": 50,
  "attempts": 5,
  "game_over": true,
  "correct_number": 50
}
```

**çŒœæµ‹è¿‡å¤§**
```json
{
  "success": true,
  "message": "å¤ªå¤§äº†ï¼",
  "guess": 75,
  "attempts": 3,
  "game_over": false
}
```

**çŒœæµ‹è¿‡å°**
```json
{
  "success": true,
  "message": "å¤ªå°äº†ï¼",
  "guess": 25,
  "attempts": 2,
  "game_over": false
}
```

**å“åº”å­—æ®µè¯´æ˜**
| å­—æ®µå | ç±»å‹ | æè¿° |
|--------|------|------|
| success | boolean | è¯·æ±‚æ˜¯å¦æˆåŠŸ |
| message | string | åé¦ˆä¿¡æ¯ |
| guess | integer | ç”¨æˆ·çŒœæµ‹çš„æ•°å­— |
| attempts | integer | å½“å‰æ€»å°è¯•æ¬¡æ•° |
| game_over | boolean | æ¸¸æˆæ˜¯å¦ç»“æŸ |
| correct_number | integer | æ­£ç¡®ç­”æ¡ˆï¼ˆä»…æ¸¸æˆç»“æŸæ—¶è¿”å›ï¼‰ |

---

### 3. é‡ç½®æ¸¸æˆ
é‡ç½®å½“å‰æ¸¸æˆï¼Œç”Ÿæˆæ–°çš„ç›®æ ‡æ•°å­—ã€‚

**ç«¯ç‚¹ä¿¡æ¯**
- **URL**: `/api/reset`
- **æ–¹æ³•**: `POST`
- **æè¿°**: é‡ç½®æ¸¸æˆçŠ¶æ€

**è¯·æ±‚ç¤ºä¾‹**
```bash
curl -X POST http://localhost:8082/api/reset
```

**å“åº”ç¤ºä¾‹**
```json
{
  "success": true,
  "message": "æ¸¸æˆå·²é‡ç½®",
  "new_range": "1-100",
  "attempts": 0
}
```

**å“åº”å­—æ®µè¯´æ˜**
| å­—æ®µå | ç±»å‹ | æè¿° |
|--------|------|------|
| success | boolean | æ“ä½œæ˜¯å¦æˆåŠŸ |
| message | string | æˆåŠŸæç¤ºä¿¡æ¯ |
| new_range | string | æ–°çš„æ•°å­—èŒƒå›´ |
| attempts | integer | é‡ç½®åçš„å°è¯•æ¬¡æ•°ï¼ˆ0ï¼‰ |

---

### 4. è·å–æ¸¸æˆåˆ—è¡¨
è·å–å¹³å°æä¾›çš„æ¸¸æˆåˆ—è¡¨ã€‚

**ç«¯ç‚¹ä¿¡æ¯**
- **URL**: `/api/games`
- **æ–¹æ³•**: `GET`
- **æè¿°**: è·å–å¯ç”¨æ¸¸æˆåˆ—è¡¨

**è¯·æ±‚ç¤ºä¾‹**
```bash
curl -X GET http://localhost:8082/api/games
```

**å“åº”ç¤ºä¾‹**
```json
[
  {
    "id": "guess-number",
    "name": "çŒœæ•°å­—æ¸¸æˆ",
    "description": "ç»å…¸çš„çŒœæ•°å­—æ¸¸æˆï¼ŒæŒ‘æˆ˜ä½ çš„ç›´è§‰å’Œé€»è¾‘",
    "difficulty": "ç®€å•",
    "category": "ç›Šæ™º",
    "image": "ğŸ¯",
    "url": "/guess-number.html"
  }
]
```

**å“åº”å­—æ®µè¯´æ˜**
| å­—æ®µå | ç±»å‹ | æè¿° |
|--------|------|------|
| id | string | æ¸¸æˆå”¯ä¸€æ ‡è¯†ç¬¦ |
| name | string | æ¸¸æˆåç§° |
| description | string | æ¸¸æˆæè¿° |
| difficulty | string | éš¾åº¦ç­‰çº§ |
| category | string | æ¸¸æˆç±»åˆ« |
| image | string | æ¸¸æˆå›¾æ ‡ |
| url | string | æ¸¸æˆé¡µé¢é“¾æ¥ |

---

### 5. è·å–æ’è¡Œæ¦œ
è·å–æ¸¸æˆæ’è¡Œæ¦œä¿¡æ¯ã€‚

**ç«¯ç‚¹ä¿¡æ¯**
- **URL**: `/api/leaderboard`
- **æ–¹æ³•**: `GET`
- **æè¿°**: è·å–æ’è¡Œæ¦œæ•°æ®

**è¯·æ±‚ç¤ºä¾‹**
```bash
curl -X GET http://localhost:8082/api/leaderboard
```

**å“åº”ç¤ºä¾‹**
```json
[
  {
    "player": "ç©å®¶1",
    "score": 950,
    "attempts": 5,
    "time": "2:30"
  },
  {
    "player": "ç©å®¶2",
    "score": 775,
    "attempts": 15,
    "time": "3:15"
  }
]
```

**å“åº”å­—æ®µè¯´æ˜**
| å­—æ®µå | ç±»å‹ | æè¿° |
|--------|------|------|
| player | string | ç©å®¶åç§° |
| score | integer | å¾—åˆ† |
| attempts | integer | å®Œæˆæ¸¸æˆæ‰€ç”¨çš„å°è¯•æ¬¡æ•° |
| time | string | å®Œæˆæ—¶é—´ |

---

## é”™è¯¯å¤„ç†

### é”™è¯¯å“åº”æ ¼å¼
æ‰€æœ‰APIé”™è¯¯éƒ½ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å“åº”æ ¼å¼ï¼š

```json
{
  "error": "é”™è¯¯æè¿°ä¿¡æ¯",
  "code": 400
}
```

### å¸¸è§é”™è¯¯ç 
| é”™è¯¯ç  | æè¿° | ç¤ºä¾‹åœºæ™¯ |
|--------|------|----------|
| 400 | è¯·æ±‚æ ¼å¼é”™è¯¯ | æ— æ•ˆçš„JSONæ ¼å¼ |
| 400 | å‚æ•°éªŒè¯å¤±è´¥ | çŒœæµ‹æ•°å­—è¶…å‡ºèŒƒå›´ |
| 404 | èµ„æºä¸å­˜åœ¨ | è®¿é—®ä¸å­˜åœ¨çš„ç«¯ç‚¹ |
| 405 | æ–¹æ³•ä¸å…è®¸ | ä½¿ç”¨äº†ä¸æ”¯æŒçš„HTTPæ–¹æ³• |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æœåŠ¡å™¨å¤„ç†å¼‚å¸¸ |

### é”™è¯¯ç¤ºä¾‹

**æ— æ•ˆè¯·æ±‚æ ¼å¼**
```json
{
  "error": "æ— æ•ˆçš„è¯·æ±‚æ ¼å¼",
  "code": 400
}
```

**æ•°å­—èŒƒå›´é”™è¯¯**
```json
{
  "error": "çŒœæµ‹æ•°å­—å¿…é¡»åœ¨1-100ä¹‹é—´",
  "code": 400
}
```

---

## ä½¿ç”¨ç¤ºä¾‹

### å®Œæ•´æ¸¸æˆæµç¨‹ç¤ºä¾‹

1. **å¼€å§‹æ–°æ¸¸æˆ**
```bash
# è·å–æ¸¸æˆä¿¡æ¯
curl http://localhost:8082/api/info

# ç¬¬ä¸€æ¬¡çŒœæµ‹
curl -X POST http://localhost:8082/api/guess \
  -H "Content-Type: application/json" \
  -d '{"guess": 50}'

# æ ¹æ®åé¦ˆç»§ç»­çŒœæµ‹...

# æ¸¸æˆç»“æŸåé‡ç½®
curl -X POST http://localhost:8082/api/reset
```

2. **è·å–æ¸¸æˆåˆ—è¡¨**
```bash
curl http://localhost:8082/api/games
```

3. **æŸ¥çœ‹æ’è¡Œæ¦œ**
```bash
curl http://localhost:8082/api/leaderboard
```

---

## æµ‹è¯•å·¥å…·

### Postman é›†åˆ
ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹Postmané›†åˆè¿›è¡Œæµ‹è¯•ï¼š

```json
{
  "info": {
    "name": "å°æ¸¸æˆç½‘ç«™API",
    "description": "çŒœæ•°å­—æ¸¸æˆAPIæµ‹è¯•é›†åˆ"
  },
  "item": [
    {
      "name": "è·å–æ¸¸æˆä¿¡æ¯",
      "request": {
        "method": "GET",
        "url": "http://localhost:8082/api/info"
      }
    },
    {
      "name": "æäº¤çŒœæµ‹",
      "request": {
        "method": "POST",
        "url": "http://localhost:8082/api/guess",
        "header": [{"key": "Content-Type", "value": "application/json"}],
        "body": {
          "mode": "raw",
          "raw": "{\"guess\": 50}"
        }
      }
    },
    {
      "name": "é‡ç½®æ¸¸æˆ",
      "request": {
        "method": "POST",
        "url": "http://localhost:8082/api/reset"
      }
    }
  ]
}
```

### cURL æµ‹è¯•è„šæœ¬

```bash
#!/bin/bash
# å°æ¸¸æˆç½‘ç«™APIæµ‹è¯•è„šæœ¬

echo "=== å°æ¸¸æˆç½‘ç«™APIæµ‹è¯• ==="

# 1. è·å–æ¸¸æˆä¿¡æ¯
echo "1. è·å–æ¸¸æˆä¿¡æ¯..."
curl -s http://localhost:8082/api/info | jq .

# 2. è·å–æ¸¸æˆåˆ—è¡¨
echo "2. è·å–æ¸¸æˆåˆ—è¡¨..."
curl -s http://localhost:8082/api/games | jq .

# 3. è·å–æ’è¡Œæ¦œ
echo "3. è·å–æ’è¡Œæ¦œ..."
curl -s http://localhost:8082/api/leaderboard | jq .

# 4. æµ‹è¯•çŒœæ•°å­—
echo "4. æµ‹è¯•çŒœæ•°å­—..."
curl -s -X POST http://localhost:8082/api/guess \
  -H "Content-Type: application/json" \
  -d '{"guess": 50}' | jq .

echo "=== æµ‹è¯•å®Œæˆ ==="
```

---

## ç‰ˆæœ¬ä¿¡æ¯
- **APIç‰ˆæœ¬**: v1.0.0
- **å‘å¸ƒæ—¥æœŸ**: 2024å¹´
- **æœåŠ¡å™¨ç‰ˆæœ¬**: Ruståç«¯
- **æ–‡æ¡£æ›´æ–°**: 2024å¹´æœ€æ–°ç‰ˆ

## æŠ€æœ¯æ”¯æŒ
å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- é¡¹ç›®åœ°å€: `c:\Users\ck091\guess_number`
- æœåŠ¡å™¨ç«¯å£: 8082
- æŠ€æœ¯æ ˆ: Rust + WebæŠ€æœ¯